{"ast":null,"code":"var _jsxFileName = \"F:\\\\MANUKA YASAS\\\\sliit_documents\\\\semister5\\\\AF\\\\project\\\\src\\\\frontend\\\\src\\\\Pages\\\\Protected\\\\Users\\\\ViewUsers.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Api from \"../../../common/Api\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport moment from \"moment\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { Box, Button, Typography } from \"@material-ui/core\";\nimport AddCircleIcon from \"@material-ui/icons/AddCircle\";\nimport swal from \"sweetalert\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { useParams } from \"react-router-dom\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport AdminForm from \"./AdminForm\";\nimport SyncIcon from \"@material-ui/icons/Sync\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650\n  },\n  model: {\n    overflow: \"auto\"\n  }\n});\n\nfunction ViewUsers() {\n  _s();\n\n  const classes = useStyles();\n  const navidate = useNavigate();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false);\n  const {\n    role_name\n  } = useParams();\n  useEffect(() => {\n    getUserData();\n  }, []);\n\n  const getUserData = () => {\n    setLoading(true);\n    Api().get(`/reviewer/user-role/${role_name}`).then(res => setUsers(res.data.data)).catch(err => console.log(err)).finally(() => setLoading(false));\n  };\n\n  const deleteUser = id => {\n    Api().delete(`/admin/users/${id}`).then(res => {\n      removeUserFromList(res.data.data._id);\n      swal(\"User was deleted successfully!\");\n    }).catch(err => console.log(err));\n  };\n\n  const removeUserFromList = id => {\n    const rmv_index = users.findIndex((val, index) => val._id === id);\n    var newUsers = users;\n    newUsers.splice(rmv_index, 1);\n    setUsers(newUsers);\n    console.log(rmv_index);\n    console.log(newUsers);\n  };\n\n  const closeModel = () => {\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      className: classes.model,\n      open: open,\n      \"aria-labelledby\": \"simple-modal-title\",\n      \"aria-describedby\": \"simple-modal-description\",\n      children: /*#__PURE__*/_jsxDEV(AdminForm, {\n        handleClose: closeModel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 6,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\"Manage users (\", users.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          color: \"secondary\",\n          \"aria-label\": \"New User\",\n          component: \"span\",\n          size: \"small\",\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(AddCircleIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 24\n          }, this),\n          onClick: () => setOpen(true),\n          children: \"New User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            marginLeft: \"10px\"\n          },\n          color: \"primary\",\n          \"aria-label\": \"Sync\",\n          component: \"span\",\n          size: \"small\",\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(SyncIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 24\n          }, this),\n          onClick: getUserData,\n          children: \"Sync\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), loading && /*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          className: classes.table,\n          \"aria-label\": \"simple table\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"User name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Phone\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"User role\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Last update\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Created At\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"View\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: users.map((user, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [\"#\", index + 1]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"th\",\n                scope: \"row\",\n                children: user.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: user.firstName + \" \" + user.lastName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: user.phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: user.role\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: user.role === \"MEMBER\" ? user.approved ? \"Approved\" : \"Rejected\" : \"Approved\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: moment(new Date(user.updatedAt).valueOf()).fromNow()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: moment(new Date(user.createdAt).valueOf()).fromNow()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"primary\",\n                  \"aria-label\": \"View\",\n                  component: \"span\",\n                  onClick: () => {},\n                  children: /*#__PURE__*/_jsxDEV(VisibilityIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"secondary\",\n                  \"aria-label\": \"Delete\",\n                  component: \"span\",\n                  onClick: () => deleteUser(user._id),\n                  children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this)]\n            }, user._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ViewUsers, \"TnJG6QcsVjXL0ZqWw6nR1uAvO7k=\", false, function () {\n  return [useStyles, useNavigate, useParams];\n});\n\n_c = ViewUsers;\nexport default ViewUsers;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewUsers\");","map":{"version":3,"sources":["F:/MANUKA YASAS/sliit_documents/semister5/AF/project/src/frontend/src/Pages/Protected/Users/ViewUsers.js"],"names":["React","useState","useEffect","Api","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","IconButton","moment","DeleteIcon","Box","Button","Typography","AddCircleIcon","swal","Modal","useParams","VisibilityIcon","AdminForm","SyncIcon","LinearProgress","useNavigate","useStyles","table","minWidth","model","overflow","ViewUsers","classes","navidate","users","setUsers","loading","setLoading","open","setOpen","role_name","getUserData","get","then","res","data","catch","err","console","log","finally","deleteUser","id","delete","removeUserFromList","_id","rmv_index","findIndex","val","index","newUsers","splice","closeModel","length","marginLeft","map","user","email","firstName","lastName","phone","role","approved","Date","updatedAt","valueOf","fromNow","createdAt"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Api from \"../../../common/Api\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport moment from \"moment\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport { Box, Button, Typography } from \"@material-ui/core\";\r\nimport AddCircleIcon from \"@material-ui/icons/AddCircle\";\r\nimport swal from \"sweetalert\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\r\nimport AdminForm from \"./AdminForm\";\r\nimport SyncIcon from \"@material-ui/icons/Sync\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n  model: {\r\n    overflow: \"auto\",\r\n  },\r\n});\r\n\r\nfunction ViewUsers() {\r\n  const classes = useStyles();\r\n  const navidate = useNavigate();\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n  const { role_name } = useParams();\r\n\r\n  useEffect(() => {\r\n    getUserData();\r\n  }, []);\r\n\r\n  const getUserData = () => {\r\n    setLoading(true);\r\n    Api()\r\n      .get(`/reviewer/user-role/${role_name}`)\r\n      .then((res) => setUsers(res.data.data))\r\n      .catch((err) => console.log(err))\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  const deleteUser = (id) => {\r\n    Api()\r\n      .delete(`/admin/users/${id}`)\r\n      .then((res) => {\r\n        removeUserFromList(res.data.data._id);\r\n        swal(\"User was deleted successfully!\");\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const removeUserFromList = (id) => {\r\n    const rmv_index = users.findIndex((val, index) => val._id === id);\r\n    var newUsers = users;\r\n    newUsers.splice(rmv_index, 1);\r\n    setUsers(newUsers);\r\n    console.log(rmv_index);\r\n    console.log(newUsers);\r\n  };\r\n\r\n  const closeModel = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        className={classes.model}\r\n        open={open}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        <AdminForm handleClose={closeModel} />\r\n      </Modal>\r\n      <Box mt={6}>\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          <b>Manage users ({users.length})</b>\r\n        </Typography>\r\n        <TableContainer component={Paper}>\r\n          <Button\r\n            color=\"secondary\"\r\n            aria-label=\"New User\"\r\n            component=\"span\"\r\n            size=\"small\"\r\n            variant=\"contained\"\r\n            startIcon={<AddCircleIcon />}\r\n            onClick={() => setOpen(true)}\r\n          >\r\n            New User\r\n          </Button>\r\n          <Button\r\n            style={{ marginLeft: \"10px\" }}\r\n            color=\"primary\"\r\n            aria-label=\"Sync\"\r\n            component=\"span\"\r\n            size=\"small\"\r\n            variant=\"contained\"\r\n            startIcon={<SyncIcon />}\r\n            onClick={getUserData}\r\n          >\r\n            Sync\r\n          </Button>\r\n          {loading && <LinearProgress />}\r\n          <Table className={classes.table} aria-label=\"simple table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell></TableCell>\r\n                <TableCell>\r\n                  <b>Email</b>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <b>User name</b>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <b>Phone</b>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <b>User role</b>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <b>Status</b>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <b>Last update</b>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <b>Created At</b>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <b>View</b>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <b>Delete</b>\r\n                </TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {users.map((user, index) => (\r\n                <TableRow key={user._id}>\r\n                  <TableCell>\r\n                    <b>#{index + 1}</b>\r\n                  </TableCell>\r\n                  <TableCell component=\"th\" scope=\"row\">\r\n                    {user.email}\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">\r\n                    {user.firstName + \" \" + user.lastName}\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">{user.phone}</TableCell>\r\n                  <TableCell align=\"right\">{user.role}</TableCell>\r\n                  <TableCell align=\"right\">\r\n                    {user.role === \"MEMBER\"\r\n                      ? user.approved\r\n                        ? \"Approved\"\r\n                        : \"Rejected\"\r\n                      : \"Approved\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">\r\n                    {moment(new Date(user.updatedAt).valueOf()).fromNow()}\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">\r\n                    {moment(new Date(user.createdAt).valueOf()).fromNow()}\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">\r\n                    <IconButton\r\n                      color=\"primary\"\r\n                      aria-label=\"View\"\r\n                      component=\"span\"\r\n                      onClick={() => {}}\r\n                    >\r\n                      <VisibilityIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">\r\n                    <IconButton\r\n                      color=\"secondary\"\r\n                      aria-label=\"Delete\"\r\n                      component=\"span\"\r\n                      onClick={() => deleteUser(user._id)}\r\n                    >\r\n                      <DeleteIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewUsers;\r\n"]},"metadata":{},"sourceType":"module"}
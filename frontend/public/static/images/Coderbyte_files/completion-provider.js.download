(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{SocketOptions:()=>r,SocketCompletionItemProvider:()=>n});var r={reconnectionDelay:1e3,reconnectionDelayMax:6e4},n=function(){function e(e,t){var r=this;this.counter=0,this.signatureHelpTriggerCharacters=[],this.promiseFunctions=new Map,this.socket=e,this.editor=t,e.connect(),this.language=t.getModel()._languageIdentifier.language,this.uri=t.getModel().uri.toString(),this.initPromise=new Promise((function(e,t){r.promiseFunctions.set(r.counter,{resolve:e,reject:t,type:"capabilities"})})),e.on("init",(function(t){r.promiseFunctions.has(0)&&(t.signatureHelpProvider.triggerCharacters&&(r.signatureHelpTriggerCharacters=t.signatureHelpProvider.triggerCharacters),t.completionProvider.triggerCharacters&&(r.triggerCharacters=t.completionProvider.triggerCharacters),r.promiseFunctions.get(0).resolve({}),r.promiseFunctions.delete(0)),e.emit("lsp",{counter:++r.counter,method:"textDocument/didOpen",params:{textDocument:{uri:r.uri,languageId:r.language,version:r.editor.getModel().getVersionId(),text:r.editor.getModel().getValue()}}})})),e.on("lsp",(function(e){var t=parseInt(e.id);if(r.promiseFunctions.has(t)){var n={};switch(r.promiseFunctions.get(t).type){case"completionItems":n=r.createCompletionItemsResults(e);break;case"signatureHelp":n=r.createSignatureHelpResults(e)}r.promiseFunctions.get(t).resolve(n),r.promiseFunctions.delete(t)}})),this.editor.getModel().onDidChangeContent((function(){e.emit("lsp",{counter:++r.counter,method:"textDocument/didChange",params:{textDocument:{uri:r.uri,version:r.editor.getModel().getVersionId()},contentChanges:[{text:r.editor.getModel().getValue()}]}})}))}return e.prototype.onInitialized=function(e){return this.initPromise.then(e)},e.prototype.createSignatureHelpResults=function(e){return{dispose:function(){},value:e.result}},e.prototype.createCompletionItemsResults=function(e){var t=[],r=!1;return Array.isArray(e.result)?t=e.result:null!==e.result&&(t=e.result.items,r=e.result.isIncomplete),{suggestions:t.map((function(e){return{additionalTextEdits:e.additionalTextEdits,command:e.command,detail:e.detail,documentation:e.documentation,filterText:e.filterText||e.label,insertText:e.insertText||e.label,insertTextRules:e.insertTextFormat,kind:e.kind,label:e.label,range:e.range,sortText:e.sortText||e.label}})),incomplete:r}},e.prototype.provideSignatureHelp=function(e,t,r,n){var o=this;return this.socket.connected?(this.socket.emit("lsp",{counter:++this.counter,method:"textDocument/signatureHelp",params:{textDocument:{uri:this.uri},position:{line:t.lineNumber-1,character:t.column-1},context:n}}),new Promise((function(e,t){o.promiseFunctions.set(o.counter,{resolve:e,reject:t,type:"signatureHelp"})}))):null},e.prototype.provideCompletionItems=function(e,t,r){var n=this;return this.socket.connected?(this.socket.emit("lsp",{counter:++this.counter,method:"textDocument/completion",params:{textDocument:{uri:this.uri},position:{line:t.lineNumber-1,character:t.column-1},context:{triggerKind:r.triggerKind}}}),new Promise((function(e,t){n.promiseFunctions.set(n.counter,{resolve:e,reject:t,type:"completionItems"})}))):null},e}();window.MonacoLSPProxy=t})();
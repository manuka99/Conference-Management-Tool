{"ast":null,"code":"import { FETCH_USER_SUCCESS, FETCH_USER_ERROR, FETCH_USER_REQUEST, USER_LOGIN, USER_LOGOUT, INIT_REQUEST_PATH } from \"./UserActionTypes\";\nimport api from \"../../common/Api\";\nimport { authenticate } from \"../../common/auth\";\nexport const fetch_user_data_success = userData => {\n  return {\n    type: FETCH_USER_SUCCESS,\n    payload: userData\n  };\n};\nexport const fetch_user_data_error = error => {\n  return {\n    type: FETCH_USER_ERROR,\n    payload: error\n  };\n};\nexport const fetch_user_data_request = () => {\n  return {\n    type: FETCH_USER_REQUEST\n  };\n};\nexport const user_login = () => {\n  return {\n    type: USER_LOGIN\n  };\n};\nexport const user_logout = () => {\n  return {\n    type: USER_LOGOUT\n  };\n};\nexport const init_request_path = () => {\n  return {\n    type: INIT_REQUEST_PATH\n  };\n}; //side effects\n\nexport const fetch_user_data = () => {\n  return dispatch => {\n    dispatch(fetch_user_data_request());\n    api().get(\"/public/validate-token\").then(res => {\n      const {\n        user\n      } = res.data.data;\n      dispatch(fetch_user_data_success(user));\n      user && user._id && dispatch(user_login());\n    }).catch(error => {\n      console.log(error);\n      dispatch(fetch_user_data_error(error));\n      dispatch(user_logout());\n    });\n  };\n};","map":{"version":3,"sources":["F:/MANUKA YASAS/sliit_documents/semister5/AF/project/src/frontend/src/Redux/User/UserActions.js"],"names":["FETCH_USER_SUCCESS","FETCH_USER_ERROR","FETCH_USER_REQUEST","USER_LOGIN","USER_LOGOUT","INIT_REQUEST_PATH","api","authenticate","fetch_user_data_success","userData","type","payload","fetch_user_data_error","error","fetch_user_data_request","user_login","user_logout","init_request_path","fetch_user_data","dispatch","get","then","res","user","data","_id","catch","console","log"],"mappings":"AAAA,SACEA,kBADF,EAEEC,gBAFF,EAGEC,kBAHF,EAIEC,UAJF,EAKEC,WALF,EAMEC,iBANF,QAOO,mBAPP;AAQA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,SAASC,YAAT,QAA6B,mBAA7B;AAEA,OAAO,MAAMC,uBAAuB,GAAIC,QAAD,IAAc;AACnD,SAAO;AACLC,IAAAA,IAAI,EAAEV,kBADD;AAELW,IAAAA,OAAO,EAAEF;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAMG,qBAAqB,GAAIC,KAAD,IAAW;AAC9C,SAAO;AACLH,IAAAA,IAAI,EAAET,gBADD;AAELU,IAAAA,OAAO,EAAEE;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAMC,uBAAuB,GAAG,MAAM;AAC3C,SAAO;AACLJ,IAAAA,IAAI,EAAER;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMa,UAAU,GAAG,MAAM;AAC9B,SAAO;AACLL,IAAAA,IAAI,EAAEP;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMa,WAAW,GAAG,MAAM;AAC/B,SAAO;AACLN,IAAAA,IAAI,EAAEN;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMa,iBAAiB,GAAG,MAAM;AACrC,SAAO;AACLP,IAAAA,IAAI,EAAEL;AADD,GAAP;AAGD,CAJM,C,CAMP;;AACA,OAAO,MAAMa,eAAe,GAAG,MAAM;AACnC,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACL,uBAAuB,EAAxB,CAAR;AACAR,IAAAA,GAAG,GACAc,GADH,CACO,wBADP,EAEGC,IAFH,CAESC,GAAD,IAAS;AACb,YAAM;AAAEC,QAAAA;AAAF,UAAWD,GAAG,CAACE,IAAJ,CAASA,IAA1B;AACAL,MAAAA,QAAQ,CAACX,uBAAuB,CAACe,IAAD,CAAxB,CAAR;AACAA,MAAAA,IAAI,IAAIA,IAAI,CAACE,GAAb,IAAoBN,QAAQ,CAACJ,UAAU,EAAX,CAA5B;AACD,KANH,EAOGW,KAPH,CAOUb,KAAD,IAAW;AAChBc,MAAAA,OAAO,CAACC,GAAR,CAAYf,KAAZ;AACAM,MAAAA,QAAQ,CAACP,qBAAqB,CAACC,KAAD,CAAtB,CAAR;AACAM,MAAAA,QAAQ,CAACH,WAAW,EAAZ,CAAR;AACD,KAXH;AAYD,GAdD;AAeD,CAhBM","sourcesContent":["import {\r\n  FETCH_USER_SUCCESS,\r\n  FETCH_USER_ERROR,\r\n  FETCH_USER_REQUEST,\r\n  USER_LOGIN,\r\n  USER_LOGOUT,\r\n  INIT_REQUEST_PATH,\r\n} from \"./UserActionTypes\";\r\nimport api from \"../../common/Api\";\r\nimport { authenticate } from \"../../common/auth\";\r\n\r\nexport const fetch_user_data_success = (userData) => {\r\n  return {\r\n    type: FETCH_USER_SUCCESS,\r\n    payload: userData,\r\n  };\r\n};\r\n\r\nexport const fetch_user_data_error = (error) => {\r\n  return {\r\n    type: FETCH_USER_ERROR,\r\n    payload: error,\r\n  };\r\n};\r\n\r\nexport const fetch_user_data_request = () => {\r\n  return {\r\n    type: FETCH_USER_REQUEST,\r\n  };\r\n};\r\n\r\nexport const user_login = () => {\r\n  return {\r\n    type: USER_LOGIN,\r\n  };\r\n};\r\n\r\nexport const user_logout = () => {\r\n  return {\r\n    type: USER_LOGOUT,\r\n  };\r\n};\r\n\r\nexport const init_request_path = () => {\r\n  return {\r\n    type: INIT_REQUEST_PATH,\r\n  };\r\n};\r\n\r\n//side effects\r\nexport const fetch_user_data = () => {\r\n  return (dispatch) => {\r\n    dispatch(fetch_user_data_request());\r\n    api()\r\n      .get(\"/public/validate-token\")\r\n      .then((res) => {\r\n        const { user } = res.data.data;\r\n        dispatch(fetch_user_data_success(user));\r\n        user && user._id && dispatch(user_login());\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch(fetch_user_data_error(error));\r\n        dispatch(user_logout());\r\n      });\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}
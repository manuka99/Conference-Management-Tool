{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PayhereSubscription = void 0;\n\nconst Payhere_1 = require(\"./Payhere\");\n\nconst utils_1 = require(\"./utils\");\n\nconst requiredSubscriptionParams = {\n  return_url: 'returnUrl',\n  cancel_url: 'cancelUrl',\n  notify_url: 'notifyUrl',\n  first_name: 'firstName',\n  last_name: 'lastName',\n  email: 'email',\n  phone: 'phone',\n  address: 'address',\n  city: 'city',\n  country: 'country',\n  order_id: 'orderId',\n  items: 'itemTitle',\n  currency: 'currency',\n  recurrence: 'recurrence',\n  duration: 'duration',\n  amount: 'amount'\n};\n\nclass PayhereSubscription extends Payhere_1.Payhere {\n  constructor(customer, subscriptionParams, onError) {\n    super();\n\n    this.onSubscriptionError = errorMsg => console.log(errorMsg);\n\n    try {\n      this._customerInfo = customer;\n      this._subscriptionParams = subscriptionParams;\n      this.onSubscriptionError = onError;\n    } catch (err) {\n      throw new Error(err);\n    }\n  }\n\n  async start() {\n    try {\n      const subscriptionReq = { ...this._customerInfo.toJSON(),\n        ...this._subscriptionParams.toJSON()\n      };\n      utils_1.submitPayhereClientRequest(subscriptionReq, requiredSubscriptionParams, '/pay/checkout', this.onSubscriptionError);\n    } catch (err) {\n      console.error(err);\n      this.onSubscriptionError('Unknown error: ' + err);\n    }\n  }\n\n}\n\nexports.PayhereSubscription = PayhereSubscription;","map":{"version":3,"sources":["F:/MANUKA YASAS/sliit_documents/semister5/AF/project/src/frontend/node_modules/payhere-js-sdk/lib/PayhereSubscription.js"],"names":["Object","defineProperty","exports","value","PayhereSubscription","Payhere_1","require","utils_1","requiredSubscriptionParams","return_url","cancel_url","notify_url","first_name","last_name","email","phone","address","city","country","order_id","items","currency","recurrence","duration","amount","Payhere","constructor","customer","subscriptionParams","onError","onSubscriptionError","errorMsg","console","log","_customerInfo","_subscriptionParams","err","Error","start","subscriptionReq","toJSON","submitPayhereClientRequest","error"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,mBAAR,GAA8B,KAAK,CAAnC;;AACA,MAAMC,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAME,0BAA0B,GAAG;AAC/BC,EAAAA,UAAU,EAAE,WADmB;AAE/BC,EAAAA,UAAU,EAAE,WAFmB;AAG/BC,EAAAA,UAAU,EAAE,WAHmB;AAI/BC,EAAAA,UAAU,EAAE,WAJmB;AAK/BC,EAAAA,SAAS,EAAE,UALoB;AAM/BC,EAAAA,KAAK,EAAE,OANwB;AAO/BC,EAAAA,KAAK,EAAE,OAPwB;AAQ/BC,EAAAA,OAAO,EAAE,SARsB;AAS/BC,EAAAA,IAAI,EAAE,MATyB;AAU/BC,EAAAA,OAAO,EAAE,SAVsB;AAW/BC,EAAAA,QAAQ,EAAE,SAXqB;AAY/BC,EAAAA,KAAK,EAAE,WAZwB;AAa/BC,EAAAA,QAAQ,EAAE,UAbqB;AAc/BC,EAAAA,UAAU,EAAE,YAdmB;AAe/BC,EAAAA,QAAQ,EAAE,UAfqB;AAgB/BC,EAAAA,MAAM,EAAE;AAhBuB,CAAnC;;AAkBA,MAAMpB,mBAAN,SAAkCC,SAAS,CAACoB,OAA5C,CAAoD;AAChDC,EAAAA,WAAW,CAACC,QAAD,EAAWC,kBAAX,EAA+BC,OAA/B,EAAwC;AAC/C;;AACA,SAAKC,mBAAL,GAA4BC,QAAD,IAAcC,OAAO,CAACC,GAAR,CAAYF,QAAZ,CAAzC;;AACA,QAAI;AACA,WAAKG,aAAL,GAAqBP,QAArB;AACA,WAAKQ,mBAAL,GAA2BP,kBAA3B;AACA,WAAKE,mBAAL,GAA2BD,OAA3B;AACH,KAJD,CAKA,OAAOO,GAAP,EAAY;AACR,YAAM,IAAIC,KAAJ,CAAUD,GAAV,CAAN;AACH;AACJ;;AACU,QAALE,KAAK,GAAG;AACV,QAAI;AACA,YAAMC,eAAe,GAAG,EACpB,GAAG,KAAKL,aAAL,CAAmBM,MAAnB,EADiB;AAEpB,WAAG,KAAKL,mBAAL,CAAyBK,MAAzB;AAFiB,OAAxB;AAIAjC,MAAAA,OAAO,CAACkC,0BAAR,CAAmCF,eAAnC,EAAoD/B,0BAApD,EAAgF,eAAhF,EAAiG,KAAKsB,mBAAtG;AACH,KAND,CAOA,OAAOM,GAAP,EAAY;AACRJ,MAAAA,OAAO,CAACU,KAAR,CAAcN,GAAd;AACA,WAAKN,mBAAL,CAAyB,oBAAoBM,GAA7C;AACH;AACJ;;AAzB+C;;AA2BpDlC,OAAO,CAACE,mBAAR,GAA8BA,mBAA9B","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PayhereSubscription = void 0;\r\nconst Payhere_1 = require(\"./Payhere\");\r\nconst utils_1 = require(\"./utils\");\r\nconst requiredSubscriptionParams = {\r\n    return_url: 'returnUrl',\r\n    cancel_url: 'cancelUrl',\r\n    notify_url: 'notifyUrl',\r\n    first_name: 'firstName',\r\n    last_name: 'lastName',\r\n    email: 'email',\r\n    phone: 'phone',\r\n    address: 'address',\r\n    city: 'city',\r\n    country: 'country',\r\n    order_id: 'orderId',\r\n    items: 'itemTitle',\r\n    currency: 'currency',\r\n    recurrence: 'recurrence',\r\n    duration: 'duration',\r\n    amount: 'amount',\r\n};\r\nclass PayhereSubscription extends Payhere_1.Payhere {\r\n    constructor(customer, subscriptionParams, onError) {\r\n        super();\r\n        this.onSubscriptionError = (errorMsg) => console.log(errorMsg);\r\n        try {\r\n            this._customerInfo = customer;\r\n            this._subscriptionParams = subscriptionParams;\r\n            this.onSubscriptionError = onError;\r\n        }\r\n        catch (err) {\r\n            throw new Error(err);\r\n        }\r\n    }\r\n    async start() {\r\n        try {\r\n            const subscriptionReq = {\r\n                ...this._customerInfo.toJSON(),\r\n                ...this._subscriptionParams.toJSON(),\r\n            };\r\n            utils_1.submitPayhereClientRequest(subscriptionReq, requiredSubscriptionParams, '/pay/checkout', this.onSubscriptionError);\r\n        }\r\n        catch (err) {\r\n            console.error(err);\r\n            this.onSubscriptionError('Unknown error: ' + err);\r\n        }\r\n    }\r\n}\r\nexports.PayhereSubscription = PayhereSubscription;\r\n"]},"metadata":{},"sourceType":"script"}